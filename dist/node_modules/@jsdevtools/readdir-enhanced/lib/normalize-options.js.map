{"version":3,"file":"normalize-options.js","sources":["../../../../../node_modules/@jsdevtools/readdir-enhanced/lib/normalize-options.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.normalizeOptions = void 0;\nconst file_path_filter_1 = require(\"@jsdevtools/file-path-filter\");\nconst path = require(\"path\");\n/**\n * Validates and normalizes the options argument\n *\n * @param [options] - User-specified options, if any\n * @param facade - sync or async function implementations\n * @param emit - Indicates whether the reader should emit \"file\", \"directory\", and \"symlink\" events.\n *\n * @internal\n */\nfunction normalizeOptions(options, facade, emit) {\n    if (options === null || options === undefined) {\n        options = {};\n    }\n    else if (typeof options !== \"object\") {\n        throw new TypeError(\"options must be an object\");\n    }\n    let sep = options.sep;\n    if (sep === null || sep === undefined) {\n        sep = path.sep;\n    }\n    else if (typeof sep !== \"string\") {\n        throw new TypeError(\"options.sep must be a string\");\n    }\n    let stats = Boolean(options.stats || options.withFileTypes);\n    let recurseDepth, recurseFn, recurseFnNeedsStats = false, deep = options.deep;\n    if (deep === null || deep === undefined) {\n        recurseDepth = 0;\n    }\n    else if (typeof deep === \"boolean\") {\n        recurseDepth = deep ? Infinity : 0;\n    }\n    else if (typeof deep === \"number\") {\n        if (deep < 0 || isNaN(deep)) {\n            throw new Error(\"options.deep must be a positive number\");\n        }\n        else if (Math.floor(deep) !== deep) {\n            throw new Error(\"options.deep must be an integer\");\n        }\n        else {\n            recurseDepth = deep;\n        }\n    }\n    else if (typeof deep === \"function\") {\n        // Recursion functions require a Stats object\n        recurseFnNeedsStats = true;\n        recurseDepth = Infinity;\n        recurseFn = deep;\n    }\n    else if (deep instanceof RegExp || (typeof deep === \"string\" && deep.length > 0)) {\n        recurseDepth = Infinity;\n        recurseFn = file_path_filter_1.createFilter({ map, sep }, deep);\n    }\n    else {\n        throw new TypeError(\"options.deep must be a boolean, number, function, regular expression, or glob pattern\");\n    }\n    let filterFn, filterFnNeedsStats = false, filter = options.filter;\n    if (filter !== null && filter !== undefined) {\n        if (typeof filter === \"function\") {\n            // Filter functions requres a Stats object\n            filterFnNeedsStats = true;\n            filterFn = filter;\n        }\n        else if (filter instanceof RegExp ||\n            typeof filter === \"boolean\" ||\n            (typeof filter === \"string\" && filter.length > 0)) {\n            filterFn = file_path_filter_1.createFilter({ map, sep }, filter);\n        }\n        else {\n            throw new TypeError(\"options.filter must be a boolean, function, regular expression, or glob pattern\");\n        }\n    }\n    let basePath = options.basePath;\n    if (basePath === null || basePath === undefined) {\n        basePath = \"\";\n    }\n    else if (typeof basePath === \"string\") {\n        // Append a path separator to the basePath, if necessary\n        if (basePath && basePath.substr(-1) !== sep) {\n            basePath += sep;\n        }\n    }\n    else {\n        throw new TypeError(\"options.basePath must be a string\");\n    }\n    // Determine which facade methods to use\n    if (options.fs === null || options.fs === undefined) {\n        // The user didn't provide their own facades, so use our internal ones\n    }\n    else if (typeof options.fs === \"object\") {\n        // Merge the internal facade methods with the user-provided `fs` facades\n        facade = Object.assign({}, facade);\n        facade.fs = Object.assign({}, facade.fs, options.fs);\n    }\n    else {\n        throw new TypeError(\"options.fs must be an object\");\n    }\n    return {\n        recurseDepth,\n        recurseFn,\n        recurseFnNeedsStats,\n        filterFn,\n        filterFnNeedsStats,\n        stats,\n        sep,\n        basePath,\n        facade,\n        emit,\n    };\n}\nexports.normalizeOptions = normalizeOptions;\n/**\n * Maps our modified fs.Stats objects to file paths\n */\nfunction map(stats) {\n    return stats.path;\n}\n//# sourceMappingURL=normalize-options.js.map"],"names":["normalizeOptions_1","require$$0"],"mappings":"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"}